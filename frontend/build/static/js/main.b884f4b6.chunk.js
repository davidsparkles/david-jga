(this["webpackJsonpdavid-jga-frontend"]=this["webpackJsonpdavid-jga-frontend"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(9),s=n.n(a),i=(n(16),n(2)),l=(n(17),n(3)),o=n.n(l),u=n(5);function d(){return j.apply(this,arguments)}function j(){return(j=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("localhost"===window.location.hostname?"http://localhost:3000":"","/api/data"));case 2:if(200!==(t=e.sent).status){e.next=5;break}return e.abrupt("return",t.json());case 5:throw console.error("Fetch error: ".concat(t.status," ").concat(t.statusText," ").concat(t.text())),new Error(t.statusText);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(null),s=Object(i.a)(a,2),l=s[0],d=s[1];return{loading:n,error:l,post:Object(c.useCallback)(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,fetch("".concat("localhost"===window.location.hostname?"http://localhost:3000":"","/api/quest"),{method:"POST",mode:"no-cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),d(e.t0);case 9:return e.prev=9,r(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(t){return e.apply(this,arguments)}}(),[d,r])}}var v=n(4),h=n(10),O=(n(19),n(0));function x(e){var t,n,r,a,s=e.quest,l=e.onBack,d=e.permission,j=Object(c.useState)({title:"",description:"",maxXp:0,minLevel:0,xp:null,disabled:!1,archived:!1}),x=Object(i.a)(j,2),m=x[0],p=x[1],f=b(),g=f.loading,N=f.error,k=f.post;Object(c.useEffect)((function(){var e,t,n,c;null!=s&&p({title:null!==(e=s.title)&&void 0!==e?e:"",description:null!==(t=s.description)&&void 0!==t?t:"",maxXp:s.maxXp,minLevel:s.minLevel,xp:s.xp,disabled:null!==(n=s.disabled)&&void 0!==n&&n,archived:null!==(c=s.archived)&&void 0!==c&&c})}),[s]);var C=Object(c.useCallback)(Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(Object(v.a)({id:s.id},m));case 2:l();case 3:case"end":return e.stop()}}),e)}))),[l,k,s,m]),w=Object(c.useCallback)(Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k({delete:!0,id:s.id});case 2:l();case 3:case"end":return e.stop()}}),e)}))),[l,k,s]);return Object(O.jsxs)("div",{className:"questDetails",children:[Object(O.jsxs)("div",{className:"backArrowContainer",children:[Object(O.jsx)(h.a,{className:"backArrow",onClick:function(){return l()}}),Object(O.jsx)("div",{className:"value",children:"edit"===d?Object(O.jsx)("input",{value:m.title,onChange:function(e){return p(Object(v.a)(Object(v.a)({},m),{},{title:e.target.value}))}}):null!==(t=s.title)&&void 0!==t?t:"-"})]}),Object(O.jsx)("div",{className:"label",children:"Beschreibung"}),Object(O.jsx)("div",{className:"value",children:"edit"===d?Object(O.jsx)("textarea",{rows:10,value:m.description,onChange:function(e){return p(Object(v.a)(Object(v.a)({},m),{},{description:e.target.value}))}}):null!==(n=s.description)&&void 0!==n?n:"-"}),Object(O.jsx)("div",{className:"label",children:"Mindestens Level"}),Object(O.jsx)("div",{className:"value",children:"edit"===d?Object(O.jsx)("input",{type:"number",value:m.minLevel,onChange:function(e){return p(Object(v.a)(Object(v.a)({},m),{},{minLevel:parseInt(e.target.value,10)}))}}):s.minLevel}),Object(O.jsx)("div",{className:"label",children:"Maximale XP"}),Object(O.jsx)("div",{className:"value",children:"edit"===d?Object(O.jsx)("input",{type:"number",value:m.maxXp,onChange:function(e){return p(Object(v.a)(Object(v.a)({},m),{},{maxXp:parseInt(e.target.value,10)}))}}):s.maxXp}),Object(O.jsx)("div",{className:"label",children:"Erreichte XP"}),Object(O.jsx)("div",{className:"value",children:"edit"===d?Object(O.jsx)("input",{type:"number",value:null!==(r=m.xp)&&void 0!==r?r:"-",onChange:function(e){var t=parseInt(e.target.value,10);p(Object(v.a)(Object(v.a)({},m),{},{xp:t<0?null:t}))}}):"closed"!==s.state?"-":s.xp}),"edit"===d&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"label",children:"Ausblenden"}),Object(O.jsx)("div",{className:"value",children:Object(O.jsx)("input",{type:"checkbox",checked:m.disabled,onChange:function(e){return p(Object(v.a)(Object(v.a)({},m),{},{disabled:e.target.checked}))}})}),Object(O.jsx)("div",{className:"label",children:"Archiviert"}),Object(O.jsx)("div",{className:"value",children:Object(O.jsx)("input",{type:"checkbox",checked:m.archived,onChange:function(e){return p(Object(v.a)(Object(v.a)({},m),{},{archived:e.target.checked}))}})}),Object(O.jsxs)("div",{className:"buttonContainer",children:[Object(O.jsx)("div",{className:"saveContainer",children:Object(O.jsx)("button",{onClick:C,children:"Speichern"})}),s.archived&&Object(O.jsx)("div",{className:"deleteContainer",children:Object(O.jsx)("button",{onClick:w,children:"Quest l\xf6schen"})}),null!==g&&void 0!==g?g:Object(O.jsx)(O.Fragment,{children:"loading..."}),N&&Object(O.jsx)(O.Fragment,{children:JSON.stringify(N)})]}),Object(O.jsx)("h4",{children:"Versionen"}),Object(O.jsx)("div",{className:"versionList",children:null===(a=s.versions)||void 0===a?void 0:a.map((function(e){var t=e.id,n=e.created_at,c=e.fields;return Object(O.jsxs)("div",{className:"versionItem",children:["Version ",t," vom ",new Intl.DateTimeFormat("de").format(new Date(n))," ",n.substring(11,19)," ",Object(O.jsx)("button",{onClick:function(){return p(Object(v.a)(Object(v.a)(Object(v.a)({},m),c),{},{maxXp:c.max_xp,minLevel:c.min_level}))},children:"\ud83d\udd03"})]})}))})]})]})}n(21);function m(e){var t=Object(c.useState)(!1),n=Object(i.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(!0),l=Object(i.a)(s,2),d=l[0],j=l[1],v=Object(c.useState)(null),h=Object(i.a)(v,2),m=h[0],f=h[1],g=b(),N=g.loading,k=g.error,C=g.post;return null!=m?Object(O.jsx)(x,{quest:m,onBack:function(){f(null),e.refetch()},permission:e.permission}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"questList",children:[Object(O.jsxs)("div",{className:"questFilter",children:[Object(O.jsx)("input",{type:"checkbox",checked:r,onChange:function(e){return a(e.target.checked)}}),"Erledigte Quests verbergen"]}),"edit"===e.permission&&Object(O.jsxs)("div",{className:"questFilter",children:[Object(O.jsx)("input",{type:"checkbox",checked:d,onChange:function(e){return j(e.target.checked)}}),"Archivierte Quests verbergen"]}),e.quests.filter((function(e){var t=e.state;return!0!==r||"closed"!==t})).filter((function(e){var t=e.archived;return!0!==d||!1===t})).filter((function(t){var n=t.archived,c=t.disabled;return!1===n&&!1===c||"edit"===e.permission})).map((function(t,n){var c;return Object(O.jsxs)("div",{className:"questBox ".concat(t.state," ").concat(t.disabled?"disabled":""," ").concat(t.archived?"archived":""),onClick:function(){return!("none"===e.permission&&"hidden"===t.state)&&f(t)},children:[Object(O.jsxs)("div",{className:"questHeader",children:[Object(O.jsx)("div",{className:"questTitle",children:"none"===e.permission&&"hidden"===t.state||null==t.title?"\ud83d\udd12 ???":"".concat("hidden"===t.state?"\ud83d\udd12 ":"").concat(t.title)}),Object(O.jsxs)("div",{className:"questPoints",children:["closed"!==t.state?t.maxXp:"".concat(t.xp," / ").concat(t.maxXp)," XP"]})]}),!("none"===e.permission&&"hidden"===t.state)&&Object(O.jsx)("div",{className:"questDescription",children:p(null!==(c=t.description)&&void 0!==c?c:"???")}),"hidden"===t.state&&Object(O.jsxs)("div",{className:"questDescription",children:["Ab Level ",t.minLevel]})]},n)}))]}),"edit"===e.permission&&Object(O.jsx)("div",{className:"createQuestContainer",children:Object(O.jsx)("button",{onClick:Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C({title:"Neue Quest",description:"",maxXp:1,disabled:!0,minLevel:20,archived:!1});case 2:e.refetch();case 3:case"end":return t.stop()}}),t)}))),children:"Neue Quest"})}),N&&"loading ...",k&&Object(O.jsxs)(O.Fragment,{children:["Fehler: ",JSON.stringify(k)]})]})}function p(e){return null==e?"???":e.length<100?e:e.substring(0,96)+" ..."}n(22);function f(e){return Object(O.jsxs)("div",{className:"gameHeader",children:[Object(O.jsx)("div",{className:"gameHeaderTitle",children:"Quest Master"}),Object(O.jsxs)("div",{className:"gameHeaderLevel",children:["Level ",e.data.currentLevel," / ",e.data.maxLevel]}),Object(O.jsx)(g,{current:e.data.xpWithinCurrentLevel,max:e.data.xpToNextLevel+e.data.xpWithinCurrentLevel})]})}function g(e){var t=100*e.current/e.max;return Object(O.jsxs)("div",{className:"gameProgressContainer",children:[Object(O.jsx)("div",{className:"gameProgressBar",children:Object(O.jsx)("div",{style:{width:"".concat(t,"%")},className:"gameProgressCurrent",children:Object(O.jsx)("div",{className:"gameProgressCurrentText",children:e.current})})}),e.max,"\u2191"]})}var N=n(11);n(23);function k(e){var t=Object(c.useState)([]),n=Object(i.a)(t,2),r=n[0],a=n[1];Object(c.useEffect)((function(){a(e.levels.sort((function(e,t){return e.id-t.id})).map((function(e){return e.requiredXp})))}),[e.levels]);var s=Object(c.useCallback)((function(e){e<0||e>=r.length||a(r.filter((function(t,n){return n!==e})))}),[r,a]),l=Object(c.useCallback)((function(e,t){if(!(e<0||e>=r.length||t<0)){var n=r[e-1];if(!(null!=n&&n>=t)){var c=t-r[e];a(r.map((function(t,n){return e<=n?t+c:t})))}}}),[r,a]),d=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(null),s=Object(i.a)(a,2),l=s[0],d=s[1];return{loading:n,error:l,post:Object(c.useCallback)(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,fetch("".concat("localhost"===window.location.hostname?"http://localhost:3000":"","/api/levels"),{method:"POST",mode:"no-cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),d(e.t0);case 9:return e.prev=9,r(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(t){return e.apply(this,arguments)}}(),[d,r])}}(),j=d.loading,b=d.error,v=d.post;return Object(O.jsxs)("div",{className:"levels",children:[Object(O.jsx)("b",{children:"Levels"}),r.map((function(e,t){return Object(O.jsxs)("div",{className:"levelsContainer",children:[Object(O.jsx)("div",{className:"levelIndex",children:t+1}),Object(O.jsx)("div",{className:"levelXp",children:Object(O.jsx)("input",{type:"number",value:e,onChange:function(e){return l(t,parseInt(e.target.value,10))}})}),Object(O.jsx)("div",{className:"levelDelete",children:Object(O.jsx)("button",{onClick:function(){return s(t)},children:"L\xf6schen"})})]})})),Object(O.jsx)("button",{className:"levelAdd",onClick:function(){return a([].concat(Object(N.a)(r),[r[r.length-1]+1]))},children:"Neues Level"}),Object(O.jsx)("br",{}),Object(O.jsx)("button",{className:"levelsSave",onClick:function(){return v(r.map((function(e,t){return{id:t+1,requiredXp:e}})))},children:"Speichern"}),j&&Object(O.jsx)(O.Fragment,{children:"loading..."}),b&&Object(O.jsxs)(O.Fragment,{children:["Error: ",JSON.stringify(b)]})]})}n(24);function C(e){var t=function(){var e=Object(c.useState)(void 0),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(void 0),s=Object(i.a)(a,2),l=s[0],j=s[1],b=Object(c.useCallback)((function(){Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=r,e.next=4,d();case 4:e.t1=e.sent,(0,e.t0)(e.t1),j(void 0),e.next=14;break;case 9:e.prev=9,e.t2=e.catch(0),console.log(e.t2),r(void 0),j("some error");case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]);return Object(c.useEffect)(b,[b]),{data:n,error:l,refetch:b}}(),n=t.data,r=t.error,a=t.refetch,s=Object(c.useState)("quests"),l=Object(i.a)(s,2),j=l[0],b=l[1];return r?Object(O.jsxs)(O.Fragment,{children:["Error: ",JSON.stringify(r)]}):null==n?Object(O.jsx)(O.Fragment,{children:"No Data Found"}):Object(O.jsxs)("div",{className:"Game",children:[Object(O.jsx)(f,{data:n}),Object(O.jsx)("div",{className:"upperMenu",children:"edit"===e.permission&&Object(O.jsx)("button",{onClick:function(){b("quests"===j?"levels":"quests")},children:"quests"===j?"Level anzeigen":"Quests anzeigen"})}),"quests"===j&&Object(O.jsx)(m,{quests:n.quests,permission:e.permission,refetch:a}),"levels"===j&&Object(O.jsx)(k,{levels:n.levels})]})}function w(){var e=Object(c.useState)(function(){var e=window.location.search;return e.toLowerCase().includes("fitti")?"view":e.toLowerCase().includes("broiler")?"edit":"none"}()),t=Object(i.a)(e,1)[0];return Object(O.jsxs)("div",{className:"App",onTouchMove:function(e){return console.log(e)},children:[Object(O.jsx)(C,{permission:t}),"view"===t&&Object(O.jsx)("div",{className:"role",children:"Role: Viewer"}),"edit"===t&&Object(O.jsx)("div",{className:"role",children:"Role: Editor"})]})}var L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,26)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(w,{})}),document.getElementById("root")),L()}],[[25,1,2]]]);
//# sourceMappingURL=main.b884f4b6.chunk.js.map